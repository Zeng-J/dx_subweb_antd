(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95f2a1ac"],{"55fc":function(e,t,a){e.exports=a.p+"img/login.1c9ae902.jpg"},"717f":function(e,t,a){},8501:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("a-row",[s("a-col",{attrs:{xs:24,sm:8}},[s("img",{staticStyle:{width:"80%",height:"100%",margin:"100px 0 0 60px"},attrs:{src:a("55fc"),alt:""}})]),s("a-col",{attrs:{xs:24,sm:16,lg:{span:12,offset:1},xl:{span:10,offset:4},xxl:{span:8,offset:4}}},[s("div",{style:{background:"#fff",padding:"24px",minHeight:"380px"}},[s("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",form:e.form},on:{submit:e.handleSubmit}},[s("a-tabs",{attrs:{activeKey:e.customActiveKey,tabBarStyle:{textAlign:"center",borderBottom:"unset"}},on:{change:e.handleTabClick}},[s("a-tab-pane",{key:"tab1",attrs:{tab:"账号密码登陆"}},[s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile1",{rules:[{required:!0,message:"请输入正确的手机号",pattern:/^1[3456789]\d{9}$/}],validateTrigger:"change"}],expression:"[\n                        'mobile1',\n                        {rules: [{ required: true, message: '请输入正确的手机号', pattern: /^1[3456789]\\d{9}$/}], validateTrigger: 'change'}\n                    ]"}],attrs:{size:"large",type:"text",placeholder:"手机号"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"}],validateTrigger:"blur"}],expression:"[\n                        'password',\n                        {rules: [{ required: true, message: '请输入密码' }], validateTrigger: 'blur'}\n                    ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"密码 / 123asd"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),s("a-form-item",[s("a-row",[s("a-col",{attrs:{span:"16"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["picCode1",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"[\n                                'picCode1',\n                                {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'blur'}\n                            ]"}],attrs:{size:"large",type:"text",autocomplete:"false",placeholder:"验证码"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"info-circle"},slot:"prefix"})],1)],1),s("a-col",{attrs:{span:"7",offset:"1"}},[s("img",{attrs:{src:e.src,alt:"获取验证码"},on:{click:e.getPic}})])],1)],1)],1),s("a-tab-pane",{key:"tab2",attrs:{tab:"手机号登陆"}},[s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile2",{rules:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号"}],validateTrigger:"change"}],expression:"['mobile2', {rules: [{ required: true, pattern: /^1[34578]\\d{9}$/, message: '请输入正确的手机号' }], validateTrigger: 'change'}]"}],attrs:{size:"large",type:"text",placeholder:"手机号"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mobile"},slot:"prefix"})],1)],1),s("a-form-item",[s("a-row",[s("a-col",{attrs:{span:"16"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["picCode2",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"[\n                                'picCode2',\n                                {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'blur'}\n                            ]"}],attrs:{size:"large",type:"text",autocomplete:"false",placeholder:"验证码"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"info-circle"},slot:"prefix"})],1)],1),s("a-col",{attrs:{span:"7",offset:"1"}},[s("img",{attrs:{src:e.src,alt:"获取验证码"},on:{click:e.getPic}})])],1)],1),s("a-row",{attrs:{gutter:16}},[s("a-col",{staticClass:"gutter-row",attrs:{span:16}},[s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"['captcha', {rules: [{ required: true, message: '请输入验证码' }], validateTrigger: 'blur'}]"}],attrs:{size:"large",type:"text",placeholder:"验证码"}},[s("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1),s("a-col",{staticClass:"gutter-row",attrs:{span:8}},[s("a-button",{staticClass:"getCaptcha",attrs:{tabindex:"-1",disabled:e.state.smsSendBtn},domProps:{textContent:e._s(e.state.smsSendBtn?e.state.time+" s":"获取验证码")},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.getCaptcha(t)}}})],1)],1)],1)],1),s("a-form-item",[s("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["autoLogin"],expression:"['autoLogin']"}]},[e._v("自动登陆")]),s("router-link",{staticClass:"forge-password",staticStyle:{float:"right"},attrs:{to:{name:"recover",params:{user:"aaa"}}}},[e._v("忘记密码")])],1),s("a-form-item",{staticStyle:{"margin-top":"24px"}},[s("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",loading:e.state.loginBtn,disabled:e.state.loginBtn,htmlType:"submit"}},[e._v("确定")])],1),s("div",{staticClass:"user-login-other"},[s("span",[e._v("其他登陆方式")]),s("a",[s("a-icon",{staticClass:"item-icon",attrs:{type:"alipay-circle"}})],1),s("a",[s("a-icon",{staticClass:"item-icon",attrs:{type:"taobao-circle"}})],1),s("a",[s("a-icon",{staticClass:"item-icon",attrs:{type:"weibo-circle"}})],1),s("router-link",{staticClass:"register",attrs:{to:{name:"register"}}},[e._v("注册账户")])],1)],1)],1)])],1),e.requiredTwoStepCaptcha?s("two-step-captcha",{attrs:{visible:e.stepCaptchaVisible}}):e._e()],1)},r=[],i=a("3228"),o={data:function(){return{src:"",imgToken:"",smsCodeToken:"",customActiveKey:"tab1",requiredTwoStepCaptcha:!1,stepCaptchaVisible:!1,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,smsSendBtn:!1}}},methods:{handleTabClick:function(e){this.customActiveKey=e},Login:function(e,t){var a=this;Object(i["l"])(e,t).then(function(e){200===e.code?(a.$notification["success"]({message:"提示",description:"登陸成功",duration:8}),a.$store.commit("setToken",e.data.token),a.$store.state.userName=e.data.userName,a.$store.state.avatar=e.data.userLogo,a.$store.state.isLogin=!0,a.$router.push({name:"competition"})):(a.$notification["error"]({message:"错误",description:e.msg||"请求出现错误，请稍后再试",duration:4}),setTimeout(function(){a.state.loginBtn=!1},600))}).catch(function(e){console.log(e)})},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields,s=this.state,r=this.customActiveKey;s.loginBtn=!0;var i="tab1"===r?["mobile1","password","picCode1","autoLogin"]:["mobile2","picCode2","captcha","autoLogin"];a(i,{force:!0},function(e,a){e?setTimeout(function(){s.loginBtn=!1},600):"tab1"===r?t.Login("pwd",{autoLogin:a.autoLogin?1:0,imgCode:a.picCode1,imgToken:t.imgToken,userMobile:a.mobile1,userPassword:a.password}):t.Login("sms",{autoLogin:a.autoLogin?1:0,imgCode:a.picCode2,imgCodeToken:t.imgToken,userMobile:a.mobile2,userPassword:a.password,smsCode:a.captcha,smsCodeToken:t.smsCodeToken})})},getPic:function(){var e=this,t=Math.random();Object(i["e"])(t).then(function(t){e.src=t.data.imgCodePic,e.imgToken=t.data.imgToken}).catch(function(e){console.log(e)})},getCaptcha:function(e){var t=this;e.preventDefault();var a=this.form.validateFields,s=this.state,r=this;a(["mobile2","picCode2"],{force:!0},function(e,a){if(!e){s.smsSendBtn=!0;var o=window.setInterval(function(){s.time--<=0&&(s.time=60,s.smsSendBtn=!1,window.clearInterval(o))},1e3),n=t.$message.loading("验证码发送中..",0);Object(i["f"])("login",{imgCode:a.picCode2,imgToken:r.imgToken,userMobile:a.mobile2}).then(function(e){console.log(e),200===e.code?(setTimeout(n,2500),r.smsCodeToken=e.data,t.$notification["success"]({message:"提示",description:"验证码获取成功，请查看您的手机哦",duration:8})):(setTimeout(n,1),clearInterval(o),r.state.time=60,r.state.smsSendBtn=!1,r.requestFailed(e))}).catch(function(e){setTimeout(n,1),clearInterval(o),r.state.time=60,r.state.smsSendBtn=!1,r.requestFailed(e)})}})},requestFailed:function(e){this.$notification["error"]({message:"错误",description:e.data||e.msg||"请求出现错误，请稍后再试",duration:4})}}},n=o,c=(a("fb79"),a("2877")),l=Object(c["a"])(n,s,r,!1,null,"29af6698",null);t["default"]=l.exports},fb79:function(e,t,a){"use strict";var s=a("717f"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-95f2a1ac.3da55862.js.map