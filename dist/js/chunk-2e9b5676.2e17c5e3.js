(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e9b5676"],{"5c84":function(e,a,t){},dafd:function(e,a,t){"use strict";var r=t("5c84"),o=t.n(r);o.a},e87f:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"名称"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.id,callback:function(a){e.$set(e.queryParam,"id",a)},expression:"queryParam.id"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"成员"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.id,callback:function(a){e.$set(e.queryParam,"id",a)},expression:"queryParam.id"}})],1)],1),e.advanced?[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"调用次数"}},[t("a-input-number",{staticStyle:{width:"100%"},model:{value:e.queryParam.callNo,callback:function(a){e.$set(e.queryParam,"callNo",a)},expression:"queryParam.callNo"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"更新日期"}})],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"使用状态"}})],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"使用状态"}})],1)]:e._e(),t("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),t("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v("\n            "+e._s(e.advanced?"收起":"展开")+"\n            "),t("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1),t("roles-table")],1)},o=[],s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-button",{staticClass:"editable-add-btn",attrs:{type:"primary"},on:{click:function(a){return e.handleAdd()}}},[t("a-icon",{attrs:{type:"plus"}}),e._v("新增")],1),t("a-table",{attrs:{dataSource:e.dataSource,columns:e.columns,pagination:e.pagination},scopedSlots:e._u([{key:"dataStatus",fn:function(a){return t("span",{},[t("a-tag",{attrs:{color:"blue"},domProps:{textContent:e._s(1===a?"启用":"禁用")}})],1)}},{key:"admin",fn:function(a){return t("span",{},[t("a-tag",{attrs:{color:"blue"},domProps:{textContent:e._s(1===a?"是":"否")}})],1)}},{key:"operation",fn:function(a){return[t("div",{on:{click:function(t){return e.editRole(a)}}},[t("a",{attrs:{href:"javascript:;"}},[e._v("编辑")])])]}}])}),t("roles-layer",{ref:"RolesLayer",on:{getTeamRolesList:e.getTeamRolesList}})],1)},i=[],l=(t("cadf"),t("551c"),t("f751"),t("097d"),function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"保存",cancelText:"返回"},on:{cancel:e.handleCancel,ok:e.handleOk}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{"label-col":e.formTailLayout.labelCol,"wrapper-col":e.formTailLayout.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleName",{rules:[{required:!0,message:"必填！/最长20个字符！"}]}],expression:"[\n            'roleName',\n            { rules: [{ required: true, message: '必填！/最长20个字符！' }] }\n          ]"}],attrs:{placeholder:"名称"}})],1),t("a-form-item",{attrs:{"label-col":e.formTailLayout.labelCol,"wrapper-col":e.formTailLayout.wrapperCol,label:"显示顺序"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataOrder",{rules:[{required:!0,pattern:/^\d+$/,message:"必填！/只允许数字！"}]}],expression:"[\n            'dataOrder',\n            { rules: [{ required: true, pattern: /^\\d+$/, message: '必填！/只允许数字！' }] }\n          ]"}],attrs:{placeholder:"数值越小，显示越靠前"}})],1),t("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"状态"}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["dataStatus",{initialValue:1}],expression:"['dataStatus', { initialValue: 1 }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("启用")]),t("a-radio",{attrs:{value:2}},[e._v("禁用")])],1)],1),t("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"管理员"}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isAdmin",{initialValue:0}],expression:"['isAdmin', { initialValue: 0 }]"}],attrs:{disabled:""}},[t("a-radio",{attrs:{value:1}},[e._v("是")]),t("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),t("a-form-item",e._b({attrs:{label:"权限"}},"a-form-item",e.formItemLayout,!1),[t("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["permissions",{rules:[{required:!0,message:"至少选择一项！"}],initialValue:["1001"]}],expression:"[\n            'permissions',\n            { rules: [{ required: true, message: '至少选择一项！' }], initialValue: ['1001']}]"}],staticStyle:{width:"100%"}},e._l(e.permissionList,function(a){return t("a-row",{key:a.permGroup},[t("h3",[e._v(" "+e._s(a.permGroup)+"：")]),e._l(a.perm,function(a){return t("a-col",{key:a.permId,attrs:{span:12}},[t("a-checkbox",{attrs:{value:a.permId}},[e._v("\n                "+e._s(a.permName)+"\n              ")])],1)})],2)}),1)],1),t("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleReserve",{rules:[{required:!0,message:"请添加备注！"}]}],expression:"[\n            'roleReserve',\n            { rules: [{ required: true, message: '请添加备注！' }] }\n          ]"}],attrs:{placeholder:"Basic usage",rows:4}})],1)],1)],1)],1)}),n=[],c=t("3228"),d={beforeCreate:function(){this.form=this.$form.createForm(this)},created:function(){this.getPermissionList()},data:function(){return{visible:!1,formItemLayout:{labelCol:{span:4},wrapperCol:{span:20}},formTailLayout:{labelCol:{span:4},wrapperCol:{span:10}},permissionList:[],title:"",id:""}},methods:{handleCancel:function(){var e=this.form;e.resetFields(),this.visible=!1},handleOk:function(e){var a=this;console.log(e),this.form.validateFields(function(e,t){e||("编辑角色"===a.title?Object(c["d"])({dataOrder:t.dataOrder,dataStatus:t.dataStatus,permissionIds:t.permissions,roleId:a.id,roleName:t.roleName,roleReserve:t.roleReserve}).then(function(e){console.log("保存编辑角色后",e),200===e.code&&(a.$notification["success"]({message:"提示",description:"更改角色成功",duration:2}),a.$emit("getTeamRolesList"))}).catch(function(e){console.log(e)}):Object(c["a"])({dataOrder:t.dataOrder,dataStatus:t.dataStatus,permissionIds:t.permissions,roleId:"",roleName:t.roleName,roleReserve:t.roleReserve}).then(function(e){if(console.log("保存新增角色后",e),200===e.code)return a.$notification["success"]({message:"提示",description:"新增角色成功",duration:2}),void a.$emit("getTeamRolesList");a.$notification["error"]({message:"提示",description:"新增角色失败",duration:2})}).catch(function(e){console.log(e)}),a.visible=!1)})},getRoleDetails:function(e){var a=this;this.id=e,this.visible=!0,this.title="编辑角色",Object(c["w"])(e).then(function(e){console.log("角色详情弹窗",e),a.form.setFieldsValue({roleName:e.data.roleName,roleReserve:e.data.roleReserve,dataOrder:e.data.dataOrder,dataStatus:e.data.dataStatus,permissions:e.data.permissions,isAdmin:e.data.isAdmin})}).catch(function(e){console.log(e)})},addTeamRole:function(){console.log("新增角色弹层"),this.title="新增角色";var e=this.form;e.resetFields(),this.visible=!0,console.log(this.$store.state.token)},getPermissionList:function(){var e=this;Object(c["p"])().then(function(a){console.log("获取角色权限列表",a),e.permissionList=a.data,console.log("权限列表",e.permissionList)}).catch(function(e){console.log("获取角色权限",e)})}}},u=d,m=t("2877"),p=Object(m["a"])(u,l,n,!1,null,null,null),f=p.exports,v={components:{RolesLayer:f},data:function(){return{pagination:{defaultPageSize:10},visible:!1,dataSource:[],columns:[{title:"☺名称",dataIndex:"roleName"},{title:"管理员",dataIndex:"isAdmin",scopedSlots:{customRender:"admin"}},{title:"备注",dataIndex:"roleReserve"},{title:"状态",dataIndex:"dataStatus",scopedSlots:{customRender:"dataStatus"}},{title:"操作",dataIndex:"id",scopedSlots:{customRender:"operation"}}]}},created:function(){this.getTeamRolesList()},methods:{handleAdd:function(){this.$refs.RolesLayer.addTeamRole()},editRole:function(e){this.$refs.RolesLayer.getRoleDetails(e)},getTeamRolesList:function(){var e=this;Object(c["x"])().then(function(a){if(console.log("角色列表",a),4401===a.code)return e.$notification.error({message:"注意",description:"用户已失效，请重新登录"});e.dataSource=a.data.list;for(var t=0;t<e.dataSource.length;t++)e.dataSource[t].key=e.dataSource[t].id}).catch(function(e){console.log(e)})}}},b=v,h=(t("dafd"),Object(m["a"])(b,s,i,!1,null,"2412ec8d",null)),g=h.exports,y={components:{RolesTable:g},data:function(){return{advanced:!1,queryParam:{}}},methods:{toggleAdvanced:function(){this.advanced=!this.advanced}}},w=y,L=Object(m["a"])(w,r,o,!1,null,null,null);a["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2e9b5676.2e17c5e3.js.map